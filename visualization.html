<!DOCTYPE html>
<html>
  <head>
    <link type="text/css" rel="stylesheet" href="style.css"/>
    <style type="text/css">


    </style>
  </head>
  <body>
    <h2>
      <span>Brownian motion</span>, <br>
      visualization from a CV processed video <br>
      <h3> slowed down for educational purposes (from 25 fps to 2 fps) </h3>
    </h2>
    </div>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script type="text/javascript">

 var jsonCircles;
 var svgContainer = d3.select("body").append("svg")
                                     .attr("width", 1000)
                                     .attr("height", 1000);

  d3.json("data.json", function(error, json) {
  if (error) return console.warn(error);
  console.log(json);
  jsonCircles = json;

  var times = Object.keys(jsonCircles);
  var circles;
  var circleAttributes;

  function drawing(input) {
    if (circles && circles.type != "undefined") { circles.remove() };
    circles = svgContainer.selectAll("circle")
                          .data(jsonCircles[input].Moleculae)
                          .enter()
                          .append("circle");

    circleAttributes = circles
                       .attr("cx", function (d) { return d[0]; })
                       .attr("cy", function (d) { return d[1]; })
                       .attr("r", function (d) { return d[2]; })
                       .style("fill", "black");
  }

 times = Object.keys(jsonCircles);
 var i = 0;

  function doSetTimeout(i) {
    if(i<times.length) {
      setTimeout(function() { drawing(times[i]) }, 500);
      i++;
      setTimeout(function() { doSetTimeout(i) }, 500);
    }
  }

    doSetTimeout(i);

    //setTimeout(function(){drawing(times[i])}, 1000);
 /* Object.keys(jsonCircles).forEach(function(k) {
    //jsonCircles[k].Moleculae.forEach(function(l) {
      setTimeout(drawing(k), 1000);
      setTimeout(console.log(jsonCircles[k].Moleculae.length), 1000);
  //  });
  });
*/

});
    </script>
  </body>
</html>